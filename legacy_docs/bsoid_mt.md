## BSOID_MT.m
**Purpose**: For rough but fast analysis of the pre-defined 7 states of action: 1 = Pause, 2 = Rear, 3 = Groom, 4 = Sniff, 5 = Locomote, 6 = Orient Left, 7 = Orient Right. Unlike BSOID_GMM.m, this code classifies rodent open field behavior using manual thresholding criteria. 

```matlab
function [g_num,perc_unk,trans_p] = bsoid_mt(data,fps,pix_cm,smth_hstry,smth_futr,min_trans)
```

### Prior to Usage

*Run [dlc_preprocess.md](dlc_preprocess.md) first.*

#### Inputs to BSOID_MT.m

- `DATA`    A cell-array containing either one or multiple rodents' estimated positions of the 6-body parts (snout, 4 paws, and base of tail) over time recorded from the bottom-up perspective. Rows represents frame numbers. Columns 1 & 2: Snout; Columns 3, 4, 5 & 6: two front paws (Left-Right order does not matter); Columns 7, 8, 9 & 10: two hind paws (Left-Right order does not matter); Columns 11 & 12: base of tail (Place it where the tail extends out from the butt). 

  - Last tested on 071219, using data generated by DeepLabCut 2.0, with outlier (jump) frames at 0.3%.

- `FPS`    Rounded video sampling frame rate. Use *VideoReader* in MATLAB or *ffmpeg* bash command to detect. 

  ```matlab
  vidObj = VideoReader('videos/thisismyvideo.mp4');
  fps = round(vidObj.FrameRate);
  ```

  ```bash
  cd videos/
  ffmpeg -i thisismyvideo.mp4
  ```

- `PIX_CM`   Pixel-to-cm conversion to adapt our manual thresholds to the user's set-up. 

- `SMTH_HSTRY`   and `SMTH_FUTR`   designates number of frames for BOXCAR smoothing to reduce noise levels of the signal detected from DeepLabCut 2.0. This depends on your frame-rate. The default setting will automatically scale the number of frames to smooth from to approximately 40ms before and after. Obviously, the higher the sampling rate, the more de-noise this will perform.

- `MIN_TRANS`   Minimum number of frames for transition to occur. Default ~100ms. 

#### Outputs of BSOID_MT.m

- `G_NUM`    Classified behavioral state, numbered as follows, 1 = Pause, 2 = Rear, 3 = Groom, 4 = Sniff, 5 = Locomote, 6 = Orient Left, 7 = Orient Right
- `PERC_UNK`    Percentage of total number of frames that are undefined. 
- `TRANS_P`    Transition probability matrix with Markov assumption (rows as current, columns as next).

### Upon obtaining the outputs
*For deeper analyses, follow `Option 2` [bsoid_gmm.md](bsoid_gmm.md) next.*
